Bootstrap: docker
From: bioconductor/bioconductor_docker:3.21

%post
    pip install nbconvert --break-system-packages
    R -e "install.packages(c('BiocManager', 'remotes', 'IRkernel'))"
    R -e "remotes::install_version(package = 'arrow', version = '21.0.0', upgrade = 'never')"
    R -e "BiocManager::install(c('Seurat', 'SeuratObject', 'Signac', 'patchwork', 'data.table', 'dplyr', 'argparse', 'R.utils'), update = FALSE)"
    R -e "IRkernel::installspec(name = 'ir', sys_prefix = TRUE)"